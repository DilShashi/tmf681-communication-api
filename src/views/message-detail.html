<!-- src/views/message-detail.html -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Message Details</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
  <div class="container mt-4">
    <h2>Message Details</h2>
    <div id="messageDetail">
      <script>
        const message = JSON.parse('{{MESSAGE}}'.replace(/&quot;/g, '"'));
        if (message) {
          const container = document.getElementById('messageDetail');
          container.innerHTML = `
            <div class="card">
              <div class="card-body">
                <h5 class="card-title">${message.subject || 'No Subject'}</h5>
                <h6 class="card-subtitle mb-2 text-muted">State: ${message.state}</h6>
                <p class="card-text">${message.content}</p>
                <p class="text-muted">Created: ${new Date(message.createdAt).toLocaleString()}</p>
                <h6>Sender:</h6>
                <p>${message.sender?.name || 'Unknown'}</p>
                <h6>Receivers:</h6>
                <ul>
                  ${message.receiver?.map(r => `<li>${r.name} (${r.phoneNumber || r.email})</li>`).join('') || '<li>None</li>'}
                </ul>
                <a href="{{API_BASE_PATH}}/communicationMessage/messages" 
                   class="btn btn-primary">Back to List</a>
              </div>
            </div>
          `;
        } else {
          container.innerHTML = '<p>Message not found</p>';
        }
      </script>
    </div>
  </div>
</body>
</html>